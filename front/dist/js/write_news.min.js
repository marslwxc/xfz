function News(){}News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,initialFrameWidth:"100%",serverUrl:"/ueditor/upload/"})},News.prototype.handleFileUploadProgress=function(e){var t=e.total.percent.toFixed(0)+"%";News.progressGroup.show();var o=$(".progress-bar");o.css({width:t}),o.text(t)},News.prototype.handleFileUploadError=function(e){window.messageBox.showError(e.message),News.progressGroup.hide(),console.log(e.message);var t=$(".progress-bar");t.css({width:0}),t.text(0)},News.prototype.handleFileUploadComplete=function(e){console.log(e),News.progressGroup.hide();var t=$(".progress-bar");t.css({width:0}),t.text(0);var o="http://q5ttl3pxu.bkt.clouddn.com/"+e.key;console.log(o),$("input[name='thumbnail']").val(o)},News.prototype.listenUploadFieldEvent=function(){var o=$("#thumbnail-btn");o.change(function(){var e=o[0].files[0],t=new FormData;t.append("file",e),console.log(t.name),xfzajax.post({url:"/cms/upload_file/",data:t,processData:!1,contentType:!1,success:function(e){if(200===e.code){var t=e.data.url;$("#thumbnail-form").val(t)}}})})},News.prototype.listenQiniuUploadFieldEvent=function(){var s=this;$("#thumbnail-btn").change(function(){var a=this.files[0];xfzajax.get({url:"/cms/qntoken/",success:function(e){if(200===e.code){var t=e.data.token,o=(new Date).getTime()+"."+a.name.split(".")[1],n={fname:o,params:{},mimeType:["image/png","image/jpeg","image/gif","video/x-ms-wmv"]},i={useCdnDomain:!0,region:qiniu.region.z2,retryCount:6};qiniu.upload(a,o,t,n,i).subscribe({next:s.handleFileUploadProgress,error:s.handleFileUploadError,complete:s.handleFileUploadComplete})}}})})},News.prototype.listerSubmitEvent=function(){$("#submit-btn").click(function(e){e.preventDefault();var t=$(this).attr("data-news-id"),o=$("input[name='title']").val(),n=$("select[name='category']").val(),i=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),s=window.ue.getContent(),r="",l="";console.log(t),l=t?(r="/cms/edit_news/"+t+"/","新闻修改成功"):(r="/cms/write_news/","新闻添加成功"),xfzajax.post({url:r,data:{title:o,category:n,desc:i,thumbnail:a,content:s},success:function(e){200===e.code&&xfzalert.alertSuccess(l,function(){window.location.reload()})}})})},News.prototype.run=function(){this.initUEditor(),this.listenQiniuUploadFieldEvent(),this.listerSubmitEvent()},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImluaXRVRWRpdG9yIiwid2luZG93IiwidWUiLCJVRSIsImdldEVkaXRvciIsImluaXRpYWxGcmFtZUhlaWdodCIsImluaXRpYWxGcmFtZVdpZHRoIiwic2VydmVyVXJsIiwiaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzIiwicmVzcG9uc2UiLCJwZXJjZW50VGV4dCIsInRvdGFsIiwicGVyY2VudCIsInRvRml4ZWQiLCJwcm9ncmVzc0dyb3VwIiwic2hvdyIsInByb2dyZXNzQmFyIiwiJCIsImNzcyIsIndpZHRoIiwidGV4dCIsImhhbmRsZUZpbGVVcGxvYWRFcnJvciIsImVycm9yIiwibWVzc2FnZUJveCIsInNob3dFcnJvciIsIm1lc3NhZ2UiLCJoaWRlIiwiY29uc29sZSIsImxvZyIsImhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSIsInVybCIsImtleSIsInZhbCIsImxpc3RlblVwbG9hZEZpZWxkRXZlbnQiLCJ1cGxvYWRCdG4iLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwibmFtZSIsInhmemFqYXgiLCJwb3N0IiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwibGlzdGVuUWluaXVVcGxvYWRGaWVsZEV2ZW50Iiwic2VsZiIsInRoaXMiLCJnZXQiLCJ0b2tlbiIsIkRhdGUiLCJnZXRUaW1lIiwic3BsaXQiLCJwdXRFeHRyYSIsImZuYW1lIiwicGFyYW1zIiwibWltZVR5cGUiLCJjb25maWciLCJ1c2VDZG5Eb21haW4iLCJyZWdpb24iLCJxaW5pdSIsInoyIiwicmV0cnlDb3VudCIsInVwbG9hZCIsInN1YnNjcmliZSIsIm5leHQiLCJjb21wbGV0ZSIsImxpc3RlclN1Ym1pdEV2ZW50IiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicGsiLCJhdHRyIiwidGl0bGUiLCJjYXRlZ29yeSIsImRlc2MiLCJ0aHVtYm5haWwiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsInN0ciIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFFBRVRBLEtBQUtDLFVBQVVDLFlBQWMsV0FDekJDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBVSxDQUMvQkMsbUJBQXNCLElBQ3RCQyxrQkFBcUIsT0FDckJDLFVBQWEsc0JBSXJCVCxLQUFLQyxVQUFVUyx5QkFBMkIsU0FBU0MsR0FDL0MsSUFFSUMsRUFGUUQsRUFBU0UsTUFDREMsUUFDTUMsUUFBUSxHQUFLLElBQ25CZixLQUFLZ0IsY0FDWEMsT0FDZCxJQUFJQyxFQUFjQyxFQUFFLGlCQUNwQkQsRUFBWUUsSUFBSSxDQUFFQyxNQUFTVCxJQUMzQk0sRUFBWUksS0FBS1YsSUFHckJaLEtBQUtDLFVBQVVzQixzQkFBd0IsU0FBU0MsR0FDNUNyQixPQUFPc0IsV0FBV0MsVUFBVUYsRUFBTUcsU0FDZDNCLEtBQUtnQixjQUNYWSxPQUNkQyxRQUFRQyxJQUFJTixFQUFNRyxTQUNsQixJQUFJVCxFQUFjQyxFQUFFLGlCQUNwQkQsRUFBWUUsSUFBSSxDQUFFQyxNQUFTLElBQzNCSCxFQUFZSSxLQUFLLElBR3JCdEIsS0FBS0MsVUFBVThCLHlCQUEyQixTQUFTcEIsR0FDL0NrQixRQUFRQyxJQUFJbkIsR0FDUVgsS0FBS2dCLGNBQ1hZLE9BQ2QsSUFBSVYsRUFBY0MsRUFBRSxpQkFDcEJELEVBQVlFLElBQUksQ0FBRUMsTUFBUyxJQUMzQkgsRUFBWUksS0FBSyxHQUVqQixJQUVJVSxFQUZTLG9DQUNFckIsRUFBU3NCLElBRXhCSixRQUFRQyxJQUFJRSxHQUNTYixFQUFFLDJCQUNSZSxJQUFJRixJQUd2QmhDLEtBQUtDLFVBQVVrQyx1QkFBeUIsV0FDcEMsSUFBSUMsRUFBWWpCLEVBQUUsa0JBQ2xCaUIsRUFBVUMsT0FBTyxXQUNiLElBQUlDLEVBQU9GLEVBQVUsR0FBR0csTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QlQsUUFBUUMsSUFBSVUsRUFBU0csTUFDckJDLFFBQVFDLEtBQUssQ0FDVGIsSUFBTyxvQkFDUGMsS0FBUU4sRUFDUk8sYUFBZSxFQUNmQyxhQUFlLEVBQ2ZDLFFBQVcsU0FBU0MsR0FDaEIsR0FBdUIsTUFBbkJBLEVBQWEsS0FBVyxDQUN4QixJQUFJbEIsRUFBTWtCLEVBQWEsS0FBTyxJQUNUL0IsRUFBRSxtQkFDUmUsSUFBSUYsVUFPdkNoQyxLQUFLQyxVQUFVa0QsNEJBQThCLFdBQ3pDLElBQUlDLEVBQU9DLEtBQ0tsQyxFQUFFLGtCQUNSa0IsT0FBTyxXQUNiLElBQUlDLEVBQU9lLEtBQUtkLE1BQU0sR0FDdEJLLFFBQVFVLElBQUksQ0FDUnRCLElBQU8sZ0JBQ1BpQixRQUFXLFNBQVNDLEdBQ2hCLEdBQXVCLE1BQW5CQSxFQUFhLEtBQVcsQ0FDeEIsSUFBSUssRUFBUUwsRUFBYSxLQUFTLE1BQzlCakIsR0FBTSxJQUFLdUIsTUFBUUMsVUFBWSxJQUFNbkIsRUFBS0ssS0FBS2UsTUFBTSxLQUFLLEdBQzFEQyxFQUFXLENBQ1hDLE1BQU8zQixFQUNQNEIsT0FBUSxHQUNSQyxTQUFVLENBQUMsWUFBYSxhQUFjLFlBQWEsbUJBRW5EQyxFQUFTLENBQ1RDLGNBQWMsRUFDZEMsT0FBUUMsTUFBTUQsT0FBT0UsR0FDckJDLFdBQVksR0FFREYsTUFBTUcsT0FBTy9CLEVBQU1MLEVBQUtzQixFQUFPSSxFQUFVSSxHQUMvQ08sVUFBVSxDQUNmQyxLQUFRbkIsRUFBSzFDLHlCQUNiYyxNQUFTNEIsRUFBSzdCLHNCQUNkaUQsU0FBWXBCLEVBQUtyQixrQ0FRekMvQixLQUFLQyxVQUFVd0Usa0JBQW9CLFdBQ2Z0RCxFQUFFLGVBQ1J1RCxNQUFNLFNBQVNDLEdBQ3JCQSxFQUFNQyxpQkFDTixJQUNJQyxFQURNMUQsRUFBRWtDLE1BQ0N5QixLQUFLLGdCQUNkQyxFQUFRNUQsRUFBRSx1QkFBdUJlLE1BQ2pDOEMsRUFBVzdELEVBQUUsMkJBQTJCZSxNQUN4QytDLEVBQU85RCxFQUFFLHNCQUFzQmUsTUFDL0JnRCxFQUFZL0QsRUFBRSwyQkFBMkJlLE1BQ3pDaUQsRUFBVWhGLE9BQU9DLEdBQUdnRixhQUNwQnBELEVBQU0sR0FDTnFELEVBQU0sR0FDVnhELFFBQVFDLElBQUkrQyxHQUdSUSxFQUZBUixHQUNBN0MsRUFBTSxrQkFBb0I2QyxFQUFLLElBQ3pCLFdBRU43QyxFQUFNLG1CQUNBLFVBR1ZZLFFBQVFDLEtBQUssQ0FDVGIsSUFBT0EsRUFDUGMsS0FBUSxDQUNKaUMsTUFBU0EsRUFDVEMsU0FBWUEsRUFDWkMsS0FBUUEsRUFDUkMsVUFBYUEsRUFDYkMsUUFBV0EsR0FFZmxDLFFBQVcsU0FBU0MsR0FDTyxNQUFuQkEsRUFBYSxNQUNib0MsU0FBU0MsYUFBYUYsRUFBSyxXQUN2QmxGLE9BQU9xRixTQUFTQyxpQkFReEN6RixLQUFLQyxVQUFVeUYsSUFBTSxXQUNqQnJDLEtBQUtuRCxjQUVMbUQsS0FBS0YsOEJBQ0xFLEtBQUtvQixxQkFHVHRELEVBQUUsWUFDYSxJQUFJbkIsTUFDVjBGLE1BRUwxRixLQUFLZ0IsY0FBZ0JHLEVBQUUiLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBOZXdzKCkge31cclxuXHJcbk5ld3MucHJvdG90eXBlLmluaXRVRWRpdG9yID0gZnVuY3Rpb24oKSB7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoJ2VkaXRvcicsIHtcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAgICdpbml0aWFsRnJhbWVXaWR0aCc6IDEwMCArICclJyxcclxuICAgICAgICAnc2VydmVyVXJsJzogJy91ZWRpdG9yL3VwbG9hZC8nXHJcbiAgICB9KTtcclxufTtcclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcclxuICAgIHZhciBwZXJjZW50ID0gdG90YWwucGVyY2VudDtcclxuICAgIHZhciBwZXJjZW50VGV4dCA9IHBlcmNlbnQudG9GaXhlZCgwKSArICclJztcclxuICAgIHZhciBwcm9ncmVzc0dyb3VwID0gTmV3cy5wcm9ncmVzc0dyb3VwO1xyXG4gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NCYXIgPSAkKCcucHJvZ3Jlc3MtYmFyJyk7XHJcbiAgICBwcm9ncmVzc0Jhci5jc3MoeyAnd2lkdGgnOiBwZXJjZW50VGV4dCB9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQocGVyY2VudFRleHQpO1xyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5oYW5kbGVGaWxlVXBsb2FkRXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdmFyIHByb2dyZXNzR3JvdXAgPSBOZXdzLnByb2dyZXNzR3JvdXA7XHJcbiAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxuICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsgJ3dpZHRoJzogMCB9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQoMCk7XHJcbn1cclxuXHJcbk5ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IE5ld3MucHJvZ3Jlc3NHcm91cDtcclxuICAgIHByb2dyZXNzR3JvdXAuaGlkZSgpO1xyXG4gICAgdmFyIHByb2dyZXNzQmFyID0gJCgnLnByb2dyZXNzLWJhcicpO1xyXG4gICAgcHJvZ3Jlc3NCYXIuY3NzKHsgJ3dpZHRoJzogMCB9KTtcclxuICAgIHByb2dyZXNzQmFyLnRleHQoMCk7XHJcblxyXG4gICAgdmFyIGRvbWFpbiA9ICdodHRwOi8vcTV0dGwzcHh1LmJrdC5jbG91ZGRuLmNvbS8nO1xyXG4gICAgdmFyIGZpbGVuYW1lID0gcmVzcG9uc2Uua2V5O1xyXG4gICAgdmFyIHVybCA9IGRvbWFpbiArIGZpbGVuYW1lO1xyXG4gICAgY29uc29sZS5sb2codXJsKTtcclxuICAgIHZhciB0aHVtYm5haWxJbnB1dCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKTtcclxuICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG59XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5VcGxvYWRGaWVsZEV2ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdXBsb2FkQnRuID0gJCgnI3RodW1ibmFpbC1idG4nKTtcclxuICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGZpbGUgPSB1cGxvYWRCdG5bMF0uZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEubmFtZSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKCcjdGh1bWJuYWlsLWZvcm0nKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlblFpbml1VXBsb2FkRmllbGRFdmVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9xbnRva2VuLycsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Wydjb2RlJ10gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHJlc3VsdFsnZGF0YSddWyd0b2tlbiddO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHB1dEV4dHJhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbmFtZToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW1lVHlwZTogWydpbWFnZS9wbmcnLCAnaW1hZ2UvanBlZycsICdpbWFnZS9naWYnLCAndmlkZW8veC1tcy13bXYnXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ2RuRG9tYWluOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdpb246IHFpbml1LnJlZ2lvbi56MixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cnlDb3VudDogNlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gcWluaXUudXBsb2FkKGZpbGUsIGtleSwgdG9rZW4sIHB1dEV4dHJhLCBjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLnN1YnNjcmliZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0Jzogc2VsZi5oYW5kbGVGaWxlVXBsb2FkUHJvZ3Jlc3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZEVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOiBzZWxmLmhhbmRsZUZpbGVVcGxvYWRDb21wbGV0ZSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbk5ld3MucHJvdG90eXBlLmxpc3RlclN1Ym1pdEV2ZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gJChcIiNzdWJtaXQtYnRuXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgYnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgcGsgPSBidG4uYXR0cignZGF0YS1uZXdzLWlkJyk7XHJcbiAgICAgICAgdmFyIHRpdGxlID0gJChcImlucHV0W25hbWU9J3RpdGxlJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNhdGVnb3J5ID0gJChcInNlbGVjdFtuYW1lPSdjYXRlZ29yeSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBkZXNjID0gJChcImlucHV0W25hbWU9J2Rlc2MnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgdGh1bWJuYWlsID0gJChcImlucHV0W25hbWU9J3RodW1ibmFpbCddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gd2luZG93LnVlLmdldENvbnRlbnQoKTtcclxuICAgICAgICB2YXIgdXJsID0gJyc7XHJcbiAgICAgICAgdmFyIHN0ciA9ICcnO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHBrKTtcclxuICAgICAgICBpZiAocGspIHtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9uZXdzLycgKyBwayArICcvJztcclxuICAgICAgICAgICAgc3RyID0gJ+aWsOmXu+S/ruaUueaIkOWKnyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdXJsID0gJy9jbXMvd3JpdGVfbmV3cy8nO1xyXG4gICAgICAgICAgICBzdHIgPSAn5paw6Ze75re75Yqg5oiQ5YqfJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiB1cmwsXHJcbiAgICAgICAgICAgICdkYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgJ3RpdGxlJzogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAnY2F0ZWdvcnknOiBjYXRlZ29yeSxcclxuICAgICAgICAgICAgICAgICdkZXNjJzogZGVzYyxcclxuICAgICAgICAgICAgICAgICd0aHVtYm5haWwnOiB0aHVtYm5haWwsXHJcbiAgICAgICAgICAgICAgICAnY29udGVudCc6IGNvbnRlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKHN0ciwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuTmV3cy5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmluaXRVRWRpdG9yKCk7XHJcbiAgICAvLyB0aGlzLmxpc3RlblVwbG9hZEZpZWxkRXZlbnQoKTtcclxuICAgIHRoaXMubGlzdGVuUWluaXVVcGxvYWRGaWVsZEV2ZW50KCk7XHJcbiAgICB0aGlzLmxpc3RlclN1Ym1pdEV2ZW50KCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG5ld3MgPSBuZXcgTmV3cygpO1xyXG4gICAgbmV3cy5ydW4oKTtcclxuXHJcbiAgICBOZXdzLnByb2dyZXNzR3JvdXAgPSAkKCcjcHJvZ3Jlc3MtZ3JvdXAnKTtcclxufSk7Il19
